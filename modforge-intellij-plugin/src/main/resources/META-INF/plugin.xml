<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.modforge.intellij.plugin</id>
    <name>ModForge</name>
    <vendor>ModForge</vendor>
    <description><![CDATA[
        <p>ModForge - Autonomous Minecraft Mod Development</p>
        <p>This plugin provides tools for automated Minecraft mod development using AI technologies.</p>
        <p>Features:</p>
        <ul>
            <li>Continuous mod development with automatic error fixing</li>
            <li>Pattern recognition for optimized API usage</li>
            <li>Code generation for common mod features</li>
            <li>Multi-mod loader support (Forge, Fabric, Quilt, Architectury)</li>
        </ul>
    ]]></description>

    <!-- Product and plugin compatibility requirements -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Configuration -->
        <applicationService serviceImplementation="com.modforge.intellij.plugin.settings.ModForgeSettings"/>
        <applicationService serviceImplementation="com.modforge.intellij.plugin.auth.ModAuthenticationManager"/>
        
        <!-- Project-level services -->
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.ContinuousDevelopmentService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.AutonomousCodeGenerationService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.ai.PatternRecognitionService"/>
        
        <!-- Settings UI -->
        <applicationConfigurable
                parentId="tools"
                instance="com.modforge.intellij.plugin.settings.ModForgeSettingsConfigurable"
                id="com.modforge.intellij.plugin.settings.ModForgeSettingsConfigurable"
                displayName="ModForge"/>
        
        <!-- Tool Window -->
        <toolWindow id="ModForge"
                    anchor="right"
                    icon="AllIcons.Toolwindows.ToolWindowModuleSettings"
                    factoryClass="com.modforge.intellij.plugin.ui.toolwindow.ModForgeToolWindowFactory"/>
    </extensions>

    <actions>
        <!-- Login -->
        <action id="ModForge.Login"
                class="com.modforge.intellij.plugin.actions.LoginAction"
                text="Login to ModForge"
                description="Login to ModForge"
                icon="AllIcons.Ide.Link">
        </action>
        
        <!-- Logout -->
        <action id="ModForge.Logout"
                class="com.modforge.intellij.plugin.actions.LogoutAction"
                text="Logout from ModForge"
                description="Logout from ModForge"
                icon="AllIcons.Ide.Unlink">
        </action>
        
        <!-- Toggle Continuous Development -->
        <action id="ModForge.ToggleContinuousDevelopment"
                class="com.modforge.intellij.plugin.actions.ToggleContinuousDevelopmentAction"
                text="Toggle Continuous Development"
                description="Toggle continuous development"
                icon="AllIcons.Actions.BuildAutoReloadChanges">
        </action>
        
        <!-- Toggle Pattern Recognition -->
        <action id="ModForge.TogglePatternRecognition"
                class="com.modforge.intellij.plugin.actions.TogglePatternRecognitionAction"
                text="Toggle Pattern Recognition"
                description="Toggle pattern recognition"
                icon="AllIcons.Actions.Lightning">
        </action>
        
        <!-- Action Group for ModForge -->
        <group id="ModForge.ActionGroup" text="ModForge" description="ModForge Actions" popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <reference ref="ModForge.Login"/>
            <reference ref="ModForge.Logout"/>
            <separator/>
            <reference ref="ModForge.ToggleContinuousDevelopment"/>
            <reference ref="ModForge.TogglePatternRecognition"/>
        </group>
    </actions>
</idea-plugin>