<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.modforge.intellij.plugin</id>
    <name>ModForge</name>
    <vendor>ModForge</vendor>
    <description><![CDATA[
      ModForge - An advanced autonomous AI-powered Minecraft mod development platform.
      <ul>
        <li>AI-driven development assistants</li>
        <li>Multi-mod loader support (Forge, Fabric, Quilt, Architectury)</li>
        <li>Continuous development mode</li>
        <li>Pattern recognition to reduce API costs</li>
        <li>GitHub integration</li>
      </ul>
    ]]></description>

    <!-- Product and plugin compatibility requirements -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    
    <!-- Extensions -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Settings -->
        <applicationService serviceImplementation="com.modforge.intellij.plugin.settings.ModForgeSettings"/>
        <applicationConfigurable instance="com.modforge.intellij.plugin.settings.ModForgeSettingsConfigurable"/>
        
        <!-- Services -->
        <applicationService serviceImplementation="com.modforge.intellij.plugin.auth.ModAuthenticationManager"/>
        <applicationService serviceImplementation="com.modforge.intellij.plugin.ai.PatternRecognitionService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.ModForgeProjectService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.ContinuousDevelopmentService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.AutonomousCodeGenerationService"/>
        
        <!-- Tool Window -->
        <toolWindow id="ModForge" secondary="true" icon="AllIcons.General.Modified" anchor="right"
                  factoryClass="com.modforge.intellij.plugin.ui.toolwindow.ModForgeToolWindowFactory"/>
        
        <!-- Notifications -->
        <notificationGroup id="ModForge Notifications" displayType="BALLOON" />
        
        <!-- Startup Activities -->
        <postStartupActivity implementation="com.modforge.intellij.plugin.services.ModForgeProjectService$ProjectStartupActivity"/>
    </extensions>
    
    <!-- Actions -->
    <actions>
        <group id="ModForge.MainMenu" text="ModForge" description="ModForge menu">
            <add-to-group group-id="MainMenu" anchor="before" relative-to-action="HelpMenu"/>
            
            <!-- Authentication -->
            <action id="ModForge.Login" class="com.modforge.intellij.plugin.actions.LoginAction" text="Login" description="Login to ModForge"/>
            <action id="ModForge.Logout" class="com.modforge.intellij.plugin.actions.LogoutAction" text="Logout" description="Logout from ModForge"/>
            <action id="ModForge.VerifyAuth" class="com.modforge.intellij.plugin.actions.VerifyAuthenticationAction" text="Verify Authentication" description="Verify ModForge authentication"/>
            <action id="ModForge.TestToken" class="com.modforge.intellij.plugin.actions.TestTokenAuthAction" text="Test Token Auth" description="Test token authentication"/>
            
            <separator/>
            
            <!-- Settings -->
            <action id="ModForge.Settings" class="com.modforge.intellij.plugin.actions.OpenSettingsAction" text="Settings" description="Open ModForge settings"/>
            
            <separator/>
            
            <!-- Continuous Development -->
            <action id="ModForge.ToggleContinuousDevelopment" class="com.modforge.intellij.plugin.actions.ToggleContinuousDevelopmentAction" text="Enable Continuous Development" description="Toggle continuous development mode"/>
            <action id="ModForge.TogglePatternRecognition" class="com.modforge.intellij.plugin.actions.TogglePatternRecognitionAction" text="Enable Pattern Recognition" description="Toggle pattern recognition"/>
            
            <separator/>
            
            <!-- Tool Window -->
            <action id="ModForge.ShowToolWindow" class="com.modforge.intellij.plugin.actions.ShowToolWindowAction" text="Show ModForge Tool Window" description="Show ModForge tool window"/>
        </group>
    </actions>
</idea-plugin>