<idea-plugin>
    <id>com.modforge.intellij.plugin</id>
    <name>ModForge</name>
    <vendor email="support@modforge.io" url="https://modforge.io">ModForge</vendor>
    
    <description><![CDATA[
    ModForge - AI-powered Minecraft mod development platform.
    <br>
    <br>
    Features:
    <ul>
        <li>Autonomous code generation for Minecraft mods</li>
        <li>Intelligent error fixing</li>
        <li>Real-time collaborative editing</li>
        <li>Cross-loader mod development support</li>
        <li>API cost reduction through pattern recognition</li>
    </ul>
    <br>
    ModForge helps you create, test, and improve Minecraft mods efficiently by leveraging AI and collaborative tools.
    ]]></description>
    
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    
    <extensions defaultExtensionNs="com.intellij">
        <!-- Services -->
        <applicationService serviceImplementation="com.modforge.intellij.plugin.settings.ModForgeSettings"/>
        
        <projectService serviceImplementation="com.modforge.intellij.plugin.ai.AIServiceManager"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.CodeAnalysisService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.AutonomousCodeGenerationService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.services.AutomatedRefactoringService"/>
        <projectService serviceImplementation="com.modforge.intellij.plugin.collaboration.CollaborationService"/>
        
        <!-- Tool Windows -->
        <toolWindow id="ModForge"
                    anchor="right"
                    icon="AllIcons.General.Modified"
                    factoryClass="com.modforge.intellij.plugin.ui.toolwindow.ModForgeToolWindowFactory"/>
        
        <!-- Settings -->
        <applicationConfigurable
                parentId="tools"
                instance="com.modforge.intellij.plugin.settings.ModForgeSettingsConfigurable"
                id="com.modforge.intellij.plugin.settings.ModForgeSettingsConfigurable"
                displayName="ModForge Settings"/>
        
        <!-- Editor Extensions -->
        <editorFactoryListener implementation="com.modforge.intellij.plugin.listeners.EditorFactoryListener"/>
        
        <!-- Compiler Extensions -->
        <compiler.buildTargetScopeProvider implementation="com.modforge.intellij.plugin.compiler.ModForgeBuildTargetScopeProvider"/>
        <compiler.task execute="AFTER" implementation="com.modforge.intellij.plugin.compiler.ModForgeCompilerTask"/>
    </extensions>
    
    <actions>
        <!-- Action Groups -->
        <group id="ModForge.ActionGroup" text="ModForge" description="ModForge actions">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <action id="ModForge.GenerateCode"
                    class="com.modforge.intellij.plugin.actions.GenerateCodeAction"
                    text="Generate Code with AI"
                    description="Generate code using AI">
                <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl G"/>
            </action>
            <action id="ModForge.FixErrors"
                    class="com.modforge.intellij.plugin.actions.FixErrorsAction"
                    text="Fix Errors with AI"
                    description="Fix errors using AI">
                <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl F"/>
            </action>
            <separator/>
            <action id="ModForge.StartCollaboration"
                    class="com.modforge.intellij.plugin.actions.StartCollaborationAction"
                    text="Start Collaboration"
                    description="Start collaboration session"/>
            <action id="ModForge.JoinCollaboration"
                    class="com.modforge.intellij.plugin.actions.JoinCollaborationAction"
                    text="Join Collaboration"
                    description="Join collaboration session"/>
            <separator/>
            <action id="ModForge.SyncWithWeb"
                    class="com.modforge.intellij.plugin.actions.SyncWithWebAction"
                    text="Sync with Web Platform"
                    description="Synchronize with ModForge web platform"/>
        </group>
        
        <!-- Editor Context Menu -->
        <group id="ModForge.EditorPopupMenu">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <separator/>
            <action id="ModForge.GenerateCodeContext"
                    class="com.modforge.intellij.plugin.actions.GenerateCodeAction"
                    text="ModForge: Generate Code"
                    description="Generate code using AI"/>
            <action id="ModForge.FixErrorsContext"
                    class="com.modforge.intellij.plugin.actions.FixErrorsAction"
                    text="ModForge: Fix Errors"
                    description="Fix errors using AI"/>
        </group>
    </actions>
    
    <applicationListeners>
        <!-- Application Listeners -->
        <listener class="com.modforge.intellij.plugin.listeners.AppLifecycleListener"
                  topic="com.intellij.ide.AppLifecycleListener"/>
    </applicationListeners>
    
    <projectListeners>
        <!-- Project Listeners -->
        <listener class="com.modforge.intellij.plugin.listeners.ProjectListener"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
        <listener class="com.modforge.intellij.plugin.listeners.CompilationStatusListener"
                  topic="com.intellij.openapi.compiler.CompilationStatusListener"/>
    </projectListeners>
</idea-plugin>