plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.15.0'
}

group 'com.modforge'
version '1.0.0'

repositories {
    mavenCentral()
}

// Configure Gradle IntelliJ Plugin
// See https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html
intellij {
    version = '2022.3.3'
    type = 'IC' // Target IDE Platform - Community Edition
    plugins = ['com.intellij.java']
}

dependencies {
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.14.2'
    implementation 'org.apache.commons:commons-lang3:3.12.0'
    implementation 'org.json:json:20230227'
    testImplementation 'junit:junit:4.13.2'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

tasks {
    patchPluginXml {
        sinceBuild = "223"
        untilBuild = "233.*"
        changeNotes = """
            <h1>Version 1.0.0</h1>
            <ul>
                <li>Initial release with core functionality</li>
                <li>Authentication system</li>
                <li>Continuous development</li>
                <li>Pattern recognition for optimized API usage</li>
                <li>Multi-mod loader support</li>
            </ul>
        """
    }

    runIde {
        // Increase available memory
        jvmArgs = ['-Xmx2048m']
    }
    
    test {
        useJUnit()
    }
}