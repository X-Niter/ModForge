plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.13.2'
}

group 'com.modforge'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'com.googlecode.json-simple:json-simple:1.1.1'
    implementation 'org.apache.httpcomponents:httpclient:4.5.13'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
}

// Set compatibility for Java versions
java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

intellij {
    version = '2022.2'
    type = 'IC' // IntelliJ IDEA Community Edition
    
    plugins = [
        'java', // Add Java plugin support
    ]
}

// Configure the runIde task to use enough memory
runIde {
    jvmArgs = ['-Xmx2g']
}

patchPluginXml {
    changeNotes = """
        <h2>ModForge IntelliJ Plugin</h2>
        <p>Initial release of the ModForge IntelliJ Plugin for Minecraft mod development.</p>
        <h3>Features:</h3>
        <ul>
            <li>Integration with ModForge server</li>
            <li>Continuous mod development with error fixing</li>
            <li>Pattern recognition for improved AI efficiency</li>
            <li>Multiple mod loader support</li>
        </ul>
    """
    
    sinceBuild = '221'
    untilBuild = '232.*'
}

test {
    useJUnitPlatform()
}