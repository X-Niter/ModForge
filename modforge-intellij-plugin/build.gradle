plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.13.3'
}

group 'com.modforge'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.jetbrains:annotations:24.0.0'
    implementation 'com.squareup.okhttp3:okhttp:4.10.0'
    implementation 'com.google.code.gson:gson:2.10.1'
    implementation 'org.apache.commons:commons-lang3:3.12.0'
    
    // For OpenAI integration
    implementation 'com.theokanning.openai-gpt3-java:service:0.16.0'
    
    // For Anthropic integration (if needed)
    implementation 'com.anthropic:anthropic-java:0.2.1'
    
    // SQLite for local storage
    implementation 'org.xerial:sqlite-jdbc:3.41.2.2'
}

// Configure Gradle IntelliJ Plugin
intellij {
    version = '2023.1.3'
    type = 'IC' // Target IntelliJ IDEA Community Edition
    plugins = ['java']
}

patchPluginXml {
    changeNotes = """
      <h3>1.0.0</h3>
      <ul>
        <li>Initial release of ModForge AI for IntelliJ</li>
        <li>AI-powered code generation for Minecraft mods</li>
        <li>Intelligent error resolution</li>
        <li>Pattern learning system</li>
        <li>JAR analysis tools</li>
      </ul>
      """
    sinceBuild = '231'
    untilBuild = '241.*'
}

tasks.withType(JavaCompile) {
    sourceCompatibility = '17'
    targetCompatibility = '17'
    options.encoding = 'UTF-8'
}

signPlugin {
    // Left blank for now, will be configured for release
}

publishPlugin {
    // Left blank for now, will be configured for release
}